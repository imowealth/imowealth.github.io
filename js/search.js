var searchFunc=function(e,a,s){"use strict";$.ajax({url:e,dataType:"xml",success:function(e){var t=$("entry",e).map(function(){return{title:$("title",this).text(),content:$("content",this).text(),url:$("url",this).text()}}).get(),r=document.getElementById(a),n=document.getElementById(s);r.addEventListener("input",function(){var f='<ul class="search-result-list">',d=this.value.trim().toLowerCase().split(/[\s\-]+/);n.innerHTML="",this.value.trim().length<=0||(t.forEach(function(e){var r=!0,n=e.title.trim().toLowerCase(),a=e.content.trim().replace(/<[^>]+>/g,"").toLowerCase(),t=e.url,s=-1,c=-1,u=-1;if(""!=n&&""!=a&&d.forEach(function(e,t){s=n.indexOf(e),c=a.indexOf(e),s<0&&c<0?r=!1:(c<0&&(c=0),0==t&&(u=c))}),r){f+="<li><a href='"+t+"' class='search-result-title' target='_blank'>> "+n+"</a>";var i=e.content.trim().replace(/<[^>]+>/g,"");if(0<=u){var o=u-6,l=u+6;o<0&&(o=0),0==o&&(l=10),l>i.length&&(l=i.length);var h=i.substr(o,l);d.forEach(function(e){var t=new RegExp(e,"gi");h=h.replace(t,'<em class="search-keyword">'+e+"</em>")}),f+='<p class="search-result">'+h+"...</p>"}}}),n.innerHTML=f)})}})},inputArea=document.querySelector("#local-search-input"),getSearchFile=function(){searchFunc("/search.xml","local-search-input","local-search-result")};inputArea.onfocus=function(){getSearchFile()};var $resetButton=$("#search-form .fa-times"),$resultArea=$("#local-search-result");inputArea.oninput=function(){inputArea.value?$resetButton.show():$resetButton.hide()},resetSearch=function(){$resultArea.html(""),document.querySelector("#search-form").reset(),$resetButton.hide(),$(".no-result").hide()},inputArea.onkeydown=function(){if(13==event.keyCode)return!1},$resultArea.bind("DOMNodeRemoved DOMNodeInserted",function(e){$(e.target).text()?$(".no-result").hide():$(".no-result").show()});